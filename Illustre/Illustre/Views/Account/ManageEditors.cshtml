@model ManageAccountsRequest

@{
    ViewData["Title"] = "Manage Editors";

    if (Model is not null)
    {
        Model.ErrorMessage = "An error occured while editing or creating an account.";
        Model.Action = "/Account/ManageEditors";
    }
}

<div class="illustre-form illustre-grayscale">
    @{
        @await Html.PartialAsync("~/Views/Shared/_ErrorMessage.cshtml", Model)

        if (Model.AccountsData is not null)
        {
            @await Html.PartialAsync("~/Views/Shared/_Selected.cshtml", Model.AccountsData)
        }

        @await Html.PartialAsync("~/Views/Shared/_Search.cshtml", Model)
        
        @await Html.PartialAsync("~/Views/Account/Partial/_AddAccount.cshtml",
                                new AddAccountRequest()
                                {
                                    Role = Role.Editor,
                                })
        
        if (Model.AccountsData is not null)
        {
            foreach (var accountItem in Model.AccountsData.Models)
            {
                @await Html.PartialAsync("~/Views/Account/Partial/_UpdateAccountById.cshtml", accountItem)
            }
        }
    }
</div>

@await Html.PartialAsync("~/Views/Shared/_Pagination.cshtml",
                         new PaginationModel()
                         {
                             Total = Model.AccountsData?.Total,
                             Skip = Model.Skip,
                             AspController = "Account",
                             AspAction = "ManageEditors",
                         })
